{"ast":null,"code":"import * as postsAPI from \"../api/posts\";\nimport { reducerUtils, createPromiseThunk, handleAsyncActions, createPromiseThunkById } from \"../lib/asyncUtils\";\nconst GET_POSTS = \"posts/GET_POSTS\";\nconst GET_POSTS_SUCCESS = \"posts/GET_POSTS_SUCCESS\";\nconst GET_POSTS_ERROR = \"posts/GET_POSTS_ERROR\";\nconst GET_POST = \"posts/GET_POST\";\nconst GET_POST_SUCCESS = \"posts/GET_POST_SUCCESS\";\nconst GET_POST_ERROR = \"posts/GET_POST_ERROR\";\nconst CLEAR_POST = \"posts/CLEAR_POST\";\nexport const getPosts = createPromiseThunk(GET_POSTS, postsAPI.getPosts); // export const getPost = createPromiseThunk(GET_POST, postsAPI.getPostById);\n\nexport const getPost = createPromiseThunkById(GET_POST, postsAPI.getPostById);\nexport const clearPost = () => ({\n  type: CLEAR_POST\n});\nconst initialState = {\n  posts: reducerUtils.initial(),\n  post: {}\n};\nconst getPostsReducer = handleAsyncActions(GET_POSTS, \"posts\", true); // const getPostReducer = handleAsyncActions(GET_POST, \"post\");\n\nconst getPostReducer = (state, action) => {\n  const id = action.meta;\n\n  switch (action.type) {\n    case GET_POST:\n      return { ...state,\n        post: { ...state.post,\n          [id]: reducerUtils.loading(state.post[id] && state.post[id].data)\n        }\n      };\n\n    case GET_POST_SUCCESS:\n      return { ...state,\n        post: { ...state.post,\n          [id]: reducerUtils.success(action.payload)\n        }\n      };\n\n    case GET_POST_ERROR:\n      return { ...state,\n        post: { ...state.post,\n          [id]: reducerUtils.error(action.payload)\n        }\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default function posts(state = initialState, action) {\n  switch (action.type) {\n    case GET_POSTS:\n    case GET_POSTS_SUCCESS:\n    case GET_POSTS_ERROR:\n      return getPostsReducer(state, action);\n\n    case GET_POST:\n    case GET_POST_SUCCESS:\n    case GET_POST_ERROR:\n      return getPostReducer(state, action);\n\n    case CLEAR_POST:\n      return { ...state,\n        post: reducerUtils.initial()\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/j0dev/Desktop/j0dev/Study/react/learn-redux-middleware/src/modules/posts.js"],"names":["postsAPI","reducerUtils","createPromiseThunk","handleAsyncActions","createPromiseThunkById","GET_POSTS","GET_POSTS_SUCCESS","GET_POSTS_ERROR","GET_POST","GET_POST_SUCCESS","GET_POST_ERROR","CLEAR_POST","getPosts","getPost","getPostById","clearPost","type","initialState","posts","initial","post","getPostsReducer","getPostReducer","state","action","id","meta","loading","data","success","payload","error"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,cAA1B;AACA,SACEC,YADF,EAEEC,kBAFF,EAGEC,kBAHF,EAIEC,sBAJF,QAKO,mBALP;AAOA,MAAMC,SAAS,GAAG,iBAAlB;AACA,MAAMC,iBAAiB,GAAG,yBAA1B;AACA,MAAMC,eAAe,GAAG,uBAAxB;AAEA,MAAMC,QAAQ,GAAG,gBAAjB;AACA,MAAMC,gBAAgB,GAAG,wBAAzB;AACA,MAAMC,cAAc,GAAG,sBAAvB;AAEA,MAAMC,UAAU,GAAG,kBAAnB;AAEA,OAAO,MAAMC,QAAQ,GAAGV,kBAAkB,CAACG,SAAD,EAAYL,QAAQ,CAACY,QAArB,CAAnC,C,CAEP;;AACA,OAAO,MAAMC,OAAO,GAAGT,sBAAsB,CAACI,QAAD,EAAWR,QAAQ,CAACc,WAApB,CAAtC;AAEP,OAAO,MAAMC,SAAS,GAAG,OAAO;AAAEC,EAAAA,IAAI,EAAEL;AAAR,CAAP,CAAlB;AAEP,MAAMM,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAEjB,YAAY,CAACkB,OAAb,EADY;AAEnBC,EAAAA,IAAI,EAAE;AAFa,CAArB;AAKA,MAAMC,eAAe,GAAGlB,kBAAkB,CAACE,SAAD,EAAY,OAAZ,EAAqB,IAArB,CAA1C,C,CACA;;AACA,MAAMiB,cAAc,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACxC,QAAMC,EAAE,GAAGD,MAAM,CAACE,IAAlB;;AACA,UAAQF,MAAM,CAACR,IAAf;AACE,SAAKR,QAAL;AACE,aAAO,EACL,GAAGe,KADE;AAELH,QAAAA,IAAI,EAAE,EACJ,GAAGG,KAAK,CAACH,IADL;AAEJ,WAACK,EAAD,GAAMxB,YAAY,CAAC0B,OAAb,CAAqBJ,KAAK,CAACH,IAAN,CAAWK,EAAX,KAAkBF,KAAK,CAACH,IAAN,CAAWK,EAAX,EAAeG,IAAtD;AAFF;AAFD,OAAP;;AAOF,SAAKnB,gBAAL;AACE,aAAO,EACL,GAAGc,KADE;AAELH,QAAAA,IAAI,EAAE,EACJ,GAAGG,KAAK,CAACH,IADL;AAEJ,WAACK,EAAD,GAAMxB,YAAY,CAAC4B,OAAb,CAAqBL,MAAM,CAACM,OAA5B;AAFF;AAFD,OAAP;;AAOF,SAAKpB,cAAL;AACE,aAAO,EACL,GAAGa,KADE;AAELH,QAAAA,IAAI,EAAE,EACJ,GAAGG,KAAK,CAACH,IADL;AAEJ,WAACK,EAAD,GAAMxB,YAAY,CAAC8B,KAAb,CAAmBP,MAAM,CAACM,OAA1B;AAFF;AAFD,OAAP;;AAOF;AACE,aAAOP,KAAP;AA1BJ;AA4BD,CA9BD;;AAgCA,eAAe,SAASL,KAAT,CAAeK,KAAK,GAAGN,YAAvB,EAAqCO,MAArC,EAA6C;AAC1D,UAAQA,MAAM,CAACR,IAAf;AACE,SAAKX,SAAL;AACA,SAAKC,iBAAL;AACA,SAAKC,eAAL;AACE,aAAOc,eAAe,CAACE,KAAD,EAAQC,MAAR,CAAtB;;AAEF,SAAKhB,QAAL;AACA,SAAKC,gBAAL;AACA,SAAKC,cAAL;AACE,aAAOY,cAAc,CAACC,KAAD,EAAQC,MAAR,CAArB;;AAEF,SAAKb,UAAL;AACE,aAAO,EACL,GAAGY,KADE;AAELH,QAAAA,IAAI,EAAEnB,YAAY,CAACkB,OAAb;AAFD,OAAP;;AAKF;AACE,aAAOI,KAAP;AAlBJ;AAoBD","sourcesContent":["import * as postsAPI from \"../api/posts\";\nimport {\n  reducerUtils,\n  createPromiseThunk,\n  handleAsyncActions,\n  createPromiseThunkById,\n} from \"../lib/asyncUtils\";\n\nconst GET_POSTS = \"posts/GET_POSTS\";\nconst GET_POSTS_SUCCESS = \"posts/GET_POSTS_SUCCESS\";\nconst GET_POSTS_ERROR = \"posts/GET_POSTS_ERROR\";\n\nconst GET_POST = \"posts/GET_POST\";\nconst GET_POST_SUCCESS = \"posts/GET_POST_SUCCESS\";\nconst GET_POST_ERROR = \"posts/GET_POST_ERROR\";\n\nconst CLEAR_POST = \"posts/CLEAR_POST\";\n\nexport const getPosts = createPromiseThunk(GET_POSTS, postsAPI.getPosts);\n\n// export const getPost = createPromiseThunk(GET_POST, postsAPI.getPostById);\nexport const getPost = createPromiseThunkById(GET_POST, postsAPI.getPostById);\n\nexport const clearPost = () => ({ type: CLEAR_POST });\n\nconst initialState = {\n  posts: reducerUtils.initial(),\n  post: {},\n};\n\nconst getPostsReducer = handleAsyncActions(GET_POSTS, \"posts\", true);\n// const getPostReducer = handleAsyncActions(GET_POST, \"post\");\nconst getPostReducer = (state, action) => {\n  const id = action.meta;\n  switch (action.type) {\n    case GET_POST:\n      return {\n        ...state,\n        post: {\n          ...state.post,\n          [id]: reducerUtils.loading(state.post[id] && state.post[id].data),\n        },\n      };\n    case GET_POST_SUCCESS:\n      return {\n        ...state,\n        post: {\n          ...state.post,\n          [id]: reducerUtils.success(action.payload),\n        },\n      };\n    case GET_POST_ERROR:\n      return {\n        ...state,\n        post: {\n          ...state.post,\n          [id]: reducerUtils.error(action.payload),\n        },\n      };\n    default:\n      return state;\n  }\n};\n\nexport default function posts(state = initialState, action) {\n  switch (action.type) {\n    case GET_POSTS:\n    case GET_POSTS_SUCCESS:\n    case GET_POSTS_ERROR:\n      return getPostsReducer(state, action);\n\n    case GET_POST:\n    case GET_POST_SUCCESS:\n    case GET_POST_ERROR:\n      return getPostReducer(state, action);\n\n    case CLEAR_POST:\n      return {\n        ...state,\n        post: reducerUtils.initial(),\n      };\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}